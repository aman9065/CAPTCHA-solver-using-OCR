<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login Page</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

  <!-- Flash Messages -->
 {% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="flash-message {{ category }}">{{ message }}</div>
    {% endfor %}
  {% endif %}
{% endwith %}


  <!-- Login Form -->
  <form class="login-box" action="{{ url_for('login') }}" method="post">
    <h2>LOGIN</h2>

    <input type="text" name="username" placeholder="Enter Username" required>
    <input type="password" name="password" placeholder="Enter Password" required>

    <div class="captcha-section">
      <img id="captcha-img" src="{{ url_for('static', filename='captcha9.png') }}" alt="CAPTCHA" width="150">
      <button type="button" class="reload-btn" onclick="reloadCaptcha()">â†»</button>
    </div>

    <input type="text" name="captcha" placeholder="Enter CAPTCHA" required>

    <button type="submit">Login</button>

    <p>Don't have an account? <a href="{{ url_for('signup') }}">Sign up</a></p>
  </form>

  <script>
    function reloadCaptcha() {
      fetch('/generate')
        .then(() => {
          const img = document.getElementById('captcha-img');
          img.src = "{{ url_for('static', filename='captcha9.png') }}" + '?t=' + new Date().getTime();
        });
    }

    window.onload = function () {
      reloadCaptcha();
    };

    setTimeout(() => {
      document.querySelectorAll('.flash-message').forEach(msg => msg.style.display = 'none');
    }, 3000);
  </script>

</body>
</html>










